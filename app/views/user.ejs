<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>User</title>
</head>

<body>
    <h1>User Protected Resource</h1>
    <div style="color:seagreen"><%= success %></div>
    <p>You are logged in as: <b><%= username %></b></p>
    <p>Assigned role: <b><%= role %></b></p>
    <form action="/logout" method="POST">
        <div class="mt-3">
            <button type="submit" class="btn btn-primary">Log out</button>
        </div>
    </form>
</body>

<script>
    //------------- FETCHING DATA FROM THE SERVER -------------//
    // async function onLogin() {
    // function onLogin() {

    //     let cookie = document.cookie
    //     let csrfToken = document.getElementById("_csrf").value

    //     console.log('Client cookie:', cookie)
    //     console.log('Client csrf secret:', csrfToken)

    //     // const response = await fetch("/cookie/" + cookie, {
    //     const response = fetch("/cookie/" + csrfToken, {
    //         method: "GET"
    //     })
    //         .then(function (response) {
    //             if (!response.ok) {
    //                 throw new Error(`HTTP error! status: ${response.status}`);
    //             }
    //             else {
    //                 console.log('Response:', response)
    //                 console.log('All OK')
    //             }
    //         })

    //     console.log('Response:', response)


    // }

    // onLogin()
</script>

</html>
